(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e,n){t.exports=n.p+"static/media/loading.5d5d9eef.svg"},111:function(t,e,n){t.exports=n(266)},128:function(t,e){},264:function(t,e,n){},266:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),i=n(27),o=n.n(i),c=n(268),s=n(269),u=n(270),l=n(40),p=n(16),d=n(20),h=n(21),v=n(41),f=n(36),m=n(42),b=n(9),y=n(106),g=n(95),O=n.n(g),k=n(267),j=n(10);function E(){var t=Object(b.a)(["\n  display: inline-block;\n  border-radius: 5px;\n  padding: 0.7rem 0;\n  margin: 0.5rem 1rem;\n  width: 11rem;\n  background: #151515;\n  color: white;\n  text-decoration: none;\n  text-align: center;\n  font-weight: 500;\n"]);return E=function(){return t},t}var w=Object(j.a)(k.a)(E());function x(){var t=Object(b.a)(["\n  right: 0;\n  bottom: 5px;\n  position: absolute;\n"]);return x=function(){return t},t}var _=j.a.div(x()),U=function(t){var e=t.prevUrl,n=t.nextUrl;return r.a.createElement(_,null,r.a.createElement(w,{to:e},"PREV VIDEO"),r.a.createElement(w,{to:n},"NEXT VIDEO"))},I=n(98),D=n.n(I),N=n(99),C=n.n(N);n(174);function T(){var t=Object(b.a)(["\n  position: absolute;\n  width: 100%;\n  height: 99%;\n  z-index: 4;\n"]);return T=function(){return t},t}function z(){var t=Object(b.a)(["\n  font-size: 1em;\n"]);return z=function(){return t},t}function P(){var t=Object(b.a)(["\n  font-size: 1.3em;\n  color: #545454;\n  text-align: left;\n  max-width: 60%;\n  margin-top: 10px;\n"]);return P=function(){return t},t}function S(){var t=Object(b.a)(["\n  color: #151515;\n  font-size: 2em;\n  text-align: left;\n  margin-top: 10px;\n  margin-bottom: 10px;\n"]);return S=function(){return t},t}function R(){var t=Object(b.a)(['\n  font-size: 1.5em;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n    sans-serif;\n  background-color:#e4e4e4;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  padding: 15px;\n  height: auto;\n  width: 100%;\n  border: 1px blue #e4e4e4;\n  z-index: 5;\n']);return R=function(){return t},t}var M=j.a.div(R()),A=j.a.h1(S()),V=j.a.p(P()),B=Object(j.a)(V)(z()),Y=j.a.div(T()),F=function(t){function e(){var t,n;Object(d.a)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(v.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(i)))).state={showOverlay:!0,initialized:!1},n.playContent=function(){n.player.play()},n.renderPoster=function(t){return!1===n.state.showOverlay?null:r.a.createElement(Y,{onClick:n.playContent},r.a.createElement("div",{className:"play-button",onClick:n.playContent}),!n.state.initialized&&r.a.createElement("img",{src:t.backgroundImage,alt:"cover",width:"100%",height:"100%"}))},n}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.player=Object(y.a)(this.videoNode,this.props,function(){console.log("onPlayerReady",t)}),this.player.on("play",function(){return t.setState({showOverlay:!1,initialized:!0})}),this.player.on("pause",function(){return t.setState({showOverlay:!0})})}},{key:"componentWillUnmount",value:function(){this.player&&this.player.dispose()}},{key:"renderOverlay",value:function(t){return r.a.createElement(O.a,{transitionName:"fade",transitionAppear:!0,transitionAppearTimeout:500,transitionEnterTimeout:500,transitionLeaveTimeout:300},this.state.showOverlay&&r.a.createElement(M,{key:t.id},r.a.createElement(A,null,t.title," (",D()(0,t.playbackDuration),")"),r.a.createElement(B,null,C()(t.createdAt,"MMMM DD, YYYY")),r.a.createElement(V,null,t.description),r.a.createElement(U,{prevUrl:this.props.prevUrl,nextUrl:this.props.nextUrl})))}},{key:"render",value:function(){var t=this,e=this.props.content;return r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{ref:function(e){return t.videoNode=e},className:"video-js"}),this.renderOverlay(e),this.renderPoster(e))}}]),e}(r.a.Component),J=n(23),W=n.n(J),q=n(37),H=n.n(q),L=n(100),X=n.n(L);function G(){var t=Object(b.a)(["\n  width: 99vw;\n  height: 99vh;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 1vh;\n"]);return G=function(){return t},t}var K=j.a.div(G()),Q=function(t){function e(){return Object(d.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"getContentToRender",value:function(){var t=this.props.match.params,e=this.props.contents;return 0===e.length?null:t.contentId?W()(e,function(e){return e.id===parseInt(t.contentId,10)}):e[0]}},{key:"genNextUrl",value:function(t){var e=this.props.contents,n=H()(e,function(e){return e.id===t.id});if(e[n+1]){var a=e[n+1];return"/content/".concat(a.slug,"/").concat(a.id)}var r=e[0];return"/content/".concat(r.slug,"/").concat(r.id)}},{key:"genPrevUrl",value:function(t){var e=this.props.contents,n=H()(e,function(e){return e.id===t.id});if(e[n-1]){var a=e[n-1];return"/content/".concat(a.slug,"/").concat(a.id)}var r=e[e.length-1];return"/content/".concat(r.slug,"/").concat(r.id)}},{key:"render",value:function(){var t=this.getContentToRender();if(!t)return r.a.createElement("img",{src:X.a,className:"loading-atom",alt:"logo"});var e=this.genNextUrl(t),n=this.genPrevUrl(t),a={autoplay:!1,controls:!0,fill:!0,responsive:!0,poster:t.backgroundImage,sources:[{src:t.playbackUrl,type:"video/mp4"}]};return r.a.createElement(K,{key:t.id},r.a.createElement(F,Object.assign({},a,{content:t,prevUrl:n,nextUrl:e})))}}]),e}(r.a.PureComponent),Z=Object(p.c)(function(t){return{contents:t.contents.list}})(Q),$=n(22),tt=Object($.a)(),et=n(15),nt=n(101),at=n(102),rt=n(39),it=n(108),ot=n(61),ct=n.n(ot),st=n(103),ut="https://tm-kitchen-api-alpha.herokuapp.com",lt="/videos?api_key=homework&auth_token=1&limit=10&workflow_status=ready",pt=n(105);function dt(t){return W()(t.video_asset.mp4_renditions,function(t){return 1280===t.width&&720===t.height})}function ht(t,e){return W()(t,function(t){return t.is_primary&&t.slot_type===e})}var vt=function(){function t(e){Object(d.a)(this,t),this.id=0,this.title="",this.description="",this.createdAt="",this.slug="",this.backgroundImage="",this.playbackUrl="",this.playbackDuration=0,this.id=e.id,this.title=e.title,this.description=this.parseDescription(e.description),this.createdAt=new Date(e.created_date),this.slug=e.slug,this.backgroundImage=this.parseBackgroundImage(e.associated_assets);var n=this.parsePlaybackData(e.associated_video_assets),a=Object(pt.a)(n,2),r=a[0],i=a[1];this.playbackUrl=r,this.playbackDuration=i}return Object(h.a)(t,[{key:"parseDescription",value:function(t){return t&&""!==t.trim()?t:"No description."}},{key:"parseBackgroundImage",value:function(t){var e=W()(t,function(t){return t.is_primary&&"landscape_thumbnail_asset"===t.slot_type});return e?e.asset.url:""}},{key:"parsePlaybackData",value:function(t){var e=ht(t,"landscape_asset_video_asset");if(e){var n=dt(e);if(n)return[n.url,e.video_asset.duration]}var a=ht(t,"square_asset_video_asset");if(a){var r=dt(a);if(r)return[r.url,a.video_asset.duration]}return["",0]}}]),t}(),ft={list:[]};var mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_CONTENTS":return function(t,e){var n=e.map(function(t){return new vt(t)});return Object(it.a)({},t,{list:n})}(t,e.payload);default:return t}};n(264);var bt,yt=(bt=tt,Object(et.createStore)(function(t){return Object(et.combineReducers)({router:Object(l.b)(t),contents:mt})}(bt),Object(nt.composeWithDevTools)(Object(et.applyMiddleware)(Object(rt.a)(bt),at.a))));yt.dispatch(function(){var t=Object(st.a)(ct.a.mark(function t(e){var n,a,r;return ct.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=ut+lt,t.next=3,fetch(n);case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,e({type:"RECEIVE_CONTENTS",payload:r});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());var gt=r.a.createElement(p.a,{store:yt},r.a.createElement(l.a,{history:tt},r.a.createElement(c.a,null,r.a.createElement(s.a,null,r.a.createElement(u.a,{exact:!0,path:"/",component:Z}),r.a.createElement(u.a,{exact:!0,path:"/content/:contentTitle/:contentId",component:Z})))));o.a.render(gt,document.getElementById("root"))}},[[111,2,1]]]);
//# sourceMappingURL=main.0b3e31ba.chunk.js.map